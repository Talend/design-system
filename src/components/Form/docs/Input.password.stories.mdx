import { Meta, Canvas, Story } from '@storybook/addon-docs';
import { FigmaIframe, FigmaImage, Use } from '../../../docs';
import { screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';

import Form from '../';

<Meta title="Components/Form/Fields/Password" />

# Password

Input elements of type provide a way for the user to securely enter a password.
Its content is obscured so that it cannot be read, usually by replacing each character with a symbol such as the asterisk ("\*") or a dot ("â€¢").
It will vary depending on the user agent and OS.

## Zoning

<FigmaImage
	src="https://www.figma.com/file/qc8oUSyVJM67gSsbTShftt/%F0%9F%93%90-Zoning?node-id=245%3A294"
	alt="zoning image for input password"
/>

## Style

<FigmaIframe light="https://www.figma.com/file/610Qgbz9dEHyTTkGeYHZh4/Inputs?node-id=0%3A346" />

## States

### Default

<Canvas>
	<Story name="default">
		<Form.Password label="Password" />
	</Story>
</Canvas>

### Placeholder

<Canvas>
	<Story name="placeholder">
		<Form.Password label="Password" placeholder="Type your password" />
	</Story>
</Canvas>

### Filled

<Canvas>
	<Story name="filled">
		<Form.Password label="Password" defaultValue="Passw0rd" />
	</Story>
</Canvas>

<!-- Until SB 6.5, Play fn are only designed to work with Canvas tab -->

<Story
	name="revealed"
	play={() => {
		const button = screen.getByTestId('form.password.reveal');
		userEvent.click(button);
	}}
	parameters={{ docs: { disable: true } }}
>
	<Form.Password label="Password" defaultValue="Passw0rd" />
</Story>

### Disabled

<Canvas>
	<Story name="disabled">
		<Form.Password label="Disabled Password" disabled />
	</Story>
</Canvas>

### Read only

<Canvas>
	<Story name="read-only">
		<Form.Password label="Read-Only Password" readOnly />
	</Story>
</Canvas>

### Autofocus

<Canvas>
	<Story name="autofocus">
		<Form>
			<Form.Password label="Old password" defaultValue="old" />
			<Form.Password label="New Password" defaultValue="new" autoFocus />
			<Form.Password label="Retype new password" defaultValue="new" />
		</Form>
	</Story>
</Canvas>

## Content

<Use>
	<Use.Do>
		<ul>
			<li>
				Use the following text for the tooltip on the button in the password field: _Show/Hide_.
			</li>
		</ul>
	</Use.Do>
</Use>

## Interactions

- When the user clicks outside the input, the password is not revealed anymore.

- When the user reveals or unreveals the password the focus stays within.

## Usage

N/C

## Accessibility

The reveal password button is not reachable by the keyboard.

## Changelog

| Date       | Author     | Description |
| ---------- | ---------- | ----------- |
| 01/11/2021 | Monia Huet | Init page   |
